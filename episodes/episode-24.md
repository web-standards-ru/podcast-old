# Выпуск №24

Safari TP8, Servo, цвета в вебе, сетки, доступность, портфолио.

[Обсуждайте в Слаке](http://slack.web-standards.ru), в канале #​podcast.

## 00:14 События

- [Frontend Mix](https://events.yandex.ru/events/meetings/7-july-2016/)
- [Я.Субботник](https://events.yandex.ru/events/yasubbotnik/09-july-2016/register/)
- [Frontend Union Conf](http://frontend-union.co/)
- [FrontTalks](http://fronttalks.ru/)
- [Календарь WSD](https://wsd.events/#calendar)

## 05:23 Новости браузеров

- [Safari Technology Preview Release 8](https://webkit.org/blog/6744/release-notes-for-safari-technology-preview-release-8/)
- [Servo Nightly Builds Available](https://blog.servo.org/2016/06/30/servo-nightlies/)
- [Псевдокласс `focus-within`](https://drafts.csswg.org/selectors-4/#the-focus-within-pseudo)

## 14:06 Цвета в вебе

- [Improving Color on the Web](https://webkit.org/blog/6682/improving-color-on-the-web/)
- [CSS Color Module Level 4](https://www.w3.org/TR/2016/WD-css-color-4-20160705/)
- [Свойство `currentcolor`](https://www.w3.org/TR/2016/WD-css-color-4-20160705/#currentcolor-color)
- [Disable #RRGGBBAA and #RGBA color values due to compat issues](https://bugs.chromium.org/p/chromium/issues/detail?id=618518)

## 25:41 Практика

- [Относитесь к сеткам (на флексбоксах) проще](http://css-live.ru/articles/otnosites-k-setkam-na-fleksboksax-proshhe.html)
- [Susy](https://susy.oddbird.net/), [Lost Grid](http://lostgrid.org/)
- [Unlabelled search fields](https://adactio.com/journal/10910)
- [Creating a custom input cursor/caret](https://benfrain.com/creating-a-custom-input-cursorcaret/)
- [Не проверив HTML5-кода, не суйся в воду](http://web-standards.ru/articles/check-it-before-you-wreck-it/)
- [Invisible Content Just for Screen Reader Users](http://webaim.org/techniques/css/invisiblecontent/)
- [html-tree](https://github.com/yoksel/html-tree)

## 41:47 Портфолио

## 55:50 О подкасте

- [Эпизоды на Гитхабе](https://github.com/web-standards-ru/podcast)

---

**Вадим.** Привет, с вами 24-й выпуск подкаста «Веб-стандарты» и его постоянные ведущие: Алексей Симоненко из HTML Академии, Ольга Алексашенко — верста… ой, нет, сегодня Оли с нами нет. Ну и Вадим Макеев из Оперы — это я.

## 00:14 События

**Вадим.** На этой неделе прошли события Яндекса, целых два, в Питере. Было довольно интересно. Яндекс.Деньги организовали Frontend Mix, в четверг, на котором рассказали основы БЭМа, ещё какие-то доклады: немножко базовые, но вполне интересные. Это было очень хорошее, кстати, введение в БЭМ, там даже присутствовал живой конструктор, на основе которого показывалось, как вообще собираются интерфейсы из кубиков. И там, вроде, кто-то из ваших выступал, да, Лёша?

**Лёша.** Да, там Игорь Алексеенко рассказывал про деревья и про операции со всякими логическими выражениями, т.е. побитовые операции, работа с деревьями. Игорь у нас JS-интенсив ведёт, поэтому он пришёл туда, рассказал такие вещи, с которыми JS-разработчики ну очень редко почему-то сталкиваются, хотя побитовые операции — это очень крутой инструмент.

**Вадим.** Что интересно, я и сам понял, потому что я немножко не программист, но прозвучало интересно и привлекательно, и захотелось попробовать. Я почувствовал себя немножко на JS-интенсиве, и он был в ударе, так сказать, так что это был хороший закрывающий доклад, хоть и сложный.

**Вадим.** В субботу прошёл Субботник, более традиционное мероприятие, поскольку «Frontend Mix» у нас что-то новенькое. В субботу Яндекс провёл Субботник, который я сгоряча назвал субботником по фронтенду, хотя он был больше инфраструктурный, хотя знаете, сегодня, с тем количеством инструментов, которые у нас есть, у нас без развесистой, серьёзной инфраструктуры уже никуда. И, в общем, ребята из Яндекса в субботу рассказали про сложности, которые бывают с системами контроля версий, с системами непрерывной интеграции (CI), другими интересными вещами. Рассказали, как обновился bem-core@v4 и скоро выйдет. В общем, довольно был интересный полноценный Субботник, была прямая трансляция, так что я думаю, что скоро будут видео и с «Frontend Mix» и с «Я.Субботник», наверняка вся колбаса, прямая трансляция уже доступна, всё остальное будет после. Ну слайды они точно выложили. На этом, в принципе, заканчивается череда событий, на горизонте, на котором я по крайней мере вижу. Есть какая-та конференция в Минске, что-то уже вылетело из головы, в ближайшее время в июле. Но так, примерно до августа ничего такого прямо интересного по фронтенду нет.

**Вадим.** Напомню, что 27 августа пройдёт «Frontend Union Conf» в Вильнюсе, и там соберутся объединённые сообщества и покажут всё, что происходит интересного во фронтенде. Пока анонсировали несколько докладчиков, четырёх, среди них мой коллега Матиас Байненс из Opera, который расскажет про свою любимую тему — про юникод. Эта такая тема, в которой все боятся разбираться, а он за всех разбирается и объясняет. Довольно-таки дотошная штука, зато можно всегда найти разборы Матиаса по разным темам, по регекспам, по каким-то там символам юникода и эмодзи. В общем, приезжайте, посмотрите, я свой билет уже купил, рекомендую вам, потому что будет интересно посмотреть, что сделают ребята в Вильнюсе.

Ещё мы отправили рассылку всем участником PiterCSS, которые регистрировались и посещали наши мероприятия о том, что сезон закрылся, мы отдохнём немножко, мы провели пять мероприятий, у нас там было 15 докладчиков, мы привезли соавтора CSS, в общем, довольно крутой сезон провели и вернёмся снова, где-нибудь, скорее всего в октябре, в общем, осенью, но ближе к делу разберёмся.

**Вадим.** А ещё осенью мы собираемся провести (да, у нас очень мощные планы на осень) как можно больше мероприятий, ну посмотрим, сколько получится. Так вот, мы хотим провести конференцию «Web Standards Days» в Питере, Минске, Киеве и Москве. А ещё, может быть, мы приедем в Томск, если у нас получится развернуть те планы, которые у нас появились весной. Поэтому можно, в принципе, уже писать, говорить «Ребята, у меня есть тема», «У меня есть интересная история», «У меня есть какой-то опыт», поэтому мы будем очень рады вашим докладам, поскольку время идёт, кажется, что лето долгое, но на самом деле сентябрь уже близко. И конечно, в сентябре ещё не забывайте про «FrontTalks», 17-18 сентября, пока билеты ещё не подорожали по-моему, и можно успеть их купить в предпродаже. Опять же, два дня конференция, я слышал, что там есть интересные докладчики, но пока не хочу разглашать, они по-моему ещё никого не анонсировали. Можно ребятам доверять, по предыдущим годам всё было довольно круто. Покупайте билеты и приезжайте, увидимся в Екатеринбурге!

## 05:23 Новости браузеров

**Алексей.** На этой неделе, как и две недели назад, как и четыре недели назад вышла новая Safari Technology Preview Release 8, в котором они как обычно рассказали куда они двигаются и как они пилят свой браузер. У нас новости браузеров. В этот раз очень много всяких сложных нюансов, но они в очередной раз поздравили себя с тем, что у них 100% поддержка ECMAScript-a, я думаю они будут поздравлять себя ещё не один раз. И самое такое большое — они выложили свой фреймфорк для Apple Pay в open source, чтобы было видно, как он работает, и что с ним делать — это я напомню их реализация возможности оплачивать с помощью их системы Apple Pay в вебе. А так, ну какие-то по мелочи всякие разные улучшения, ничего такого супер интересного. Другой вопрос, то что на этой неделе показали такой первый релиз, ну как релиз это совсем не релиз это даже не альфа это такая ночная сборка, которая доступна для всех — нового браузерного движка Servo, который разрабатывает Mozilla. Вот его теперь вы можете официально взять себе поставить, попробовать поиграться с ним, узнать, что ребята делают, только быть готовым к тому, что большинство сайтов разломается, потому что это очень и очень сырая альфа, это даже пре-пре-альфа, но тем не менее поиграться уже можно. Вадим ты себе его поставил?

**Вадим.** Нет, конечно, первым делом, как только это всё можно стало поднимать без бубна и без танцев я безусловно тут же скачал и посмотрел. Servo довольно-таки сырой, как в общем-то и был сырым год назад и два года назад, когда они его только начали делать даже больше по-моему. И основная история с этим Servo связана такая, что мало кто понимает вообще сути происходящего по-моему. Все такие: «А-а… ещё один браузер», потому что все думают: «А-а… Яндекс.Браузер — ещё один браузер, Opera на Хроме — ещё один браузер, Samsung браузер — ещё один новый браузер». Мы начали думать про браузеры, как про очередные оболочки, мы не думаем про движки браузеров. Servo — это новый движок, принципиально новый движок, то есть когда верстальщики поймут, что появились браузеры на движке Servo они скорее всего заплачут горькими слезами, потому что скорее всего будет очень много несовместимости, скорее всего будет много нюансов и возможно Servo будет работать во многих случаях лучше и быстрее, чем другие браузеры, и у верстальщика совсем поломается голова. Как же, мой любимый браузер не может работать хуже. Тем более браузер с небольшой долей работает лучше, чем браузер с большой долей, что же делать, под какой верстать?

В общем я рад, что на нашем ландшафте появился новый движок и очень интересно смотреть, что они делают. Они докладывают регулярно, что мол смотрите у нас анимация CSS-ная заработала, смотрите у нас ещё что-то работает, и многие вещи быстрее, и в общем радостно наблюдать это. С самого начала они стартовали проект, как попытку написать альтернативный движок, который не тащит за собой всю историю браузерных движков, потому что в современных движках очень много всего для поддержки старого железа, для поддержки старых архитектур, и это всё мешает на самом деле развиваться, то есть тот же самый Blink форкнутый от WebKit, когда-то попытался решить эту проблему архитектурную, но им опять же сложно решить всё это с наследием, потому что очень много нужно переписывать. Как сказать, пишешь с нуля ты можешь закладываться уже на совершенно современные мультипоточные, мультипроцессорные архитектуры, и это всё потенциально должно работать быстрее и ребята из Servo показывают, что это действительно работает быстрее.

**Алексей.** Мне вот, понравилась идея, которую возможно Servo сможет реализовать. Он не просто будет в разных потоках рендерить разные странички, а то, что он сможет на одной страничке разные блоки рендерить в разных процессорах, то есть это вот, точно будет гораздо быстрее. Наши страницы совсем по-другому будут собираться.

**Вадим.**: Не, ну это совсем какой-то космос. Я даже не могу это представить. Так что давайте просто подождем, и наверное, уже начнем посматривать на наши сайты в Servo, не в смысле, что: «О господи, мой сайт разваливается в Servo, надо его починить», а в смысле что: «М-м… А можно и так, а бывает и так». То есть установить и посмотреть. Там в любом случае смешная иконка с доги, которая высовывается из велосипедной звезды — это было по крайне мере весело.

**Алексей.** Я, кстати, пооткрывал несколько сайтов. Понятно академия развалилась, потому что он не поддерживает флексбокс, Яндекс развалился, потому что он не поддерживает, тоже флексбоксы. А вот самое интересное, что я зашёл на сайт [opera.com](https://www.opera.com/) и он — нормальный, ну то есть, вообще, совсем нормальный, такое ощущение, что у вас там, на таблицах всё до сих пор?

**Вадим.**: Что значит до сих пор? У нас там никогда особо таблиц, по-моему, не было, ну разве, что в совсем жуткие годы, там просто не супер современный фронтенд, насколько я понимаю, там просто какие-то работающие лэндинги. то есть, я честно скажу, я не буду гордиться, как сверстана и сделана [opera.com](https://www.opera.com/), там вполне работающий код, но ничего такого супер прогрессивного нет. Зато работает.

**Алексей.** Да, зато работает в Servo — это тоже важно. Вообще интересно следить за развитием этого движка. Вот смотришь на него, как на такого ребёнка, который вот только познаёт мир, что вот: я анимации научился, и это научился, и т.д. И так, думаешь, ну круто. Хотелось бы, конечно, что это всё быстрее произошло, чтобы он уже подтянулся, хотя бы, до состояния какого-нибудь бета, и чтобы уже можно было там тыкать его, сообщать, где баги — не баги, потому что сейчас о багах сообщать, смысла нет. Просто там не баг — это не работает просто, и всё.

**Вадим.** Мне ещё интересно, что они вот с ним сделают. Сейчас это разрабатывается силами Mozilla, вместе с Servo развивается и язык, на котором они пишут — это Rust. В какой-то момент Samsung занимался спонсорством всего этого дела, не знаю, занимается ли сейчас. И вот интересно — это станет новым движком браузера Firefox или это слишком серьезный инфраструктурный шаг, и они запустят новый браузер? В любом случае приятно, что это в open source.

И ещё, возвращаемся к новостям браузеров. Мне очень понравилась в Safari Technology Preview поддержка селектора, не будем это называть CSS4, но в общем там появилась поддержка селектора `:focus-within`. Смотрите у нас сейчас есть `:hover`, который срабатывает только, если вы каким-то пойнтером, вроде как, мышкой навели на объект, а есть `:focus`, когда у объекта появилось состояние в фокусе — дотабали до него, или как-то сильно нажали, и появился фокус, но когда мы делаем, всякие, контекстные, выпадающие меню на `:hover`, то есть наводишь на пункт, а оттуда вываливается другой список, а ещё подсписок какой-нибудь, если совсем не боитесь и так далее, то есть выпадающий список на `:hover` работает. А выпадающий список на `:focus` нормально не работает, потому что `:focus` работает по-другому — `:focus` не всплывает, как `:hover`, и в итоге это было решено селектором — `:focus-within`, который делает поведение псевдоселектора `:focus` таким же, как `:hover`. В общем, мы дадим ссылки на всякие демки. Safari была первым, точнее ребята из WebKit первыми внедрили, так что вперед, вперед, делаем сайты более доступными, более интересными. Попробуйте.

**Алексей.** Признаться честно, я открывал эти демки, не вчитываясь в статьи. Я пытался понять как она работает, взял Safari Technology Preview, открыл, посмотрел — ну вроде работает точно так же, как фокус. Но я долго не мог понять, на фига это нужно? Времени не было разобраться, поэтому вот сейчас твоё объяснение расставляет всё на свои места. Теперь стало понятно.

## 14:06 Цвета в вебе

**Вадим.** Ещё ребята из WebKit написали про то, как в Safari поддерживаются цвета. Вроде бы цвета поддерживаются всеми браузерами, миллионы цветов, и в общем-то в чем проблема? Проблема в том, что у нас в вебе, поддерживаемые цветовые модели достаточно ограничены, потому что устройства на которых работают современные браузеры, собственно, наши экраны телефонов, ноутбуков, и всего остального, они, конечно, поддерживают миллионы цветов, но их цветовые возможности ограничены возможностями устройств, и когда начали выходить новые устройства с широким цветовым диапазоном, возникла проблема в терминах rgb. Эти цветовые диапазоны уже не покрыть, и нужны новые цветовые модели, которые позволят определять с помощью media query более широкое устройство с большим диапазоном, а потом ещё и правильно эти цвета описывать, удобно и эффективно. Соответственно Safari вложилось в это, ну потому, что у Apple вышли новые iPad с широким диапазоном от поддерживаемых цветов, и в этой статье объясняется, собственно, зачем они это сделали, чем там srgb отличается от всех остальных цветовых моделей. Ну в общем довольно-таки интересное погружение в цветовой профиль и всю эту историю, поэтому ели вам эта тема интересна почитайте. Тут ещё не просто WebKit и Safari начали крутить цвета для веба на пустом месте, на самом деле вышла CSS Color Module Level 4 в которой, собственно, появились новые возможности работы с цветами.

**Алексей.** Кстати говоря, эта спецификация уже достаточно давно лежала в драфтах. Я её часто приводил на продвинутом интенсиве, как пример того, что в CSS-е будут появляться вещи из препроцессоров и вот, например, цветовые функции, которые в этой спецификации были обозначены. Это вот такой пример потому что есть такая замечательная вещь, как, например, функция `color-mod()`, она позволяет вам модифицировать ваш текущий цвет, в другой цвет всякими разными префиксами, или дополнительными командами. Например, можно взять обычный цвет и у него изменить альфа канал, или взять обычный цвет и изменить зеленый канал, или сделать его темнее, светлее, насыщеннее, контрастнее, и так далее, и это будет работать прямо в браузере. В принципе всё, что я сейчас перечислил можно узнать в вашем препроцессоре, наверняка, в вашем препроцессоре все эти механики есть, но опять же, как и с кастомными переменными здесь применимость этому всему чуть больше, потому что оно работает не на уровне препроцессинга, то есть мы получаем готовый CSS-код и все, а работает на уровне CSS, то есть мы можем изменять это через каскад, мы можем получать к этому доступ через JavaScript, мы можем менять во время перестройки нашего сайта с помощью media query. В общем у нас есть возможность работы с цветами прямо на сайте, без препроцессинга, и это по-моему очень круто, и при этом это только лишь одна функция из всей этой спецификации, а она достаточно большая, там очень много чего интересного.

**Вадим.** В общем да, ну мы долгое время плелись в хвосте, потому что экраны компьютеров, и других устройств были маломощными, но сейчас у нас по-моему, приходит новая революция, как когда-то революция с ретиновыми изображениями, то есть более большая плотность пикселей, которая позволяла нам делать более четкие изображения и не видеть, наконец-то, этой пиксельной сетки. Сейчас, наверное, у нас идет неторопливо революция более широких цветов. Ну представьте, наверное не многие понимают эту ситуацию, когда вы смотрите обычным взглядом среднего человека на картину мира вокруг, вы потом, глядя на фотографию, думаете, ну примерно тоже самое, но на самом деле нет — вы можете видеть гораздо больше, чем матрица фотоаппарата, можете видеть гораздо больше, чем тот плоский снимок, который у вас получается в итоге, и новые устройства, и новые возможности принесут нам ещё более яркое, ещё более правдоподобную картинку на наши устройства, и нашу цифровую жизнь. Мне ещё в этой спецификации понравился небольшой абзац про свойство `currentcolor`, вы наверное пользовались этим свойством, если вы делали всякие SVG-иконки, или просто делали так, чтобы цвет вашей рамки зависел от цвета текущего значения `color`, можно наследовать с помощью `currentcolor`. Так вот, это свойство впервые появилось в SVG, а в SVG принято, чтобы записывать вещи с CamelCase, а в CSS-свойстве принято записывать через дефис. Так вот свойство `currentcolor` сейчас нам приходится записывать, `currentColor`, `Color` — с большой буквы. На самом деле `currentcolor` можно писать строчными, потому что в CSS независимые значения, и даже в этой спецификации оно приводится в записи строчными, то есть вот такая забавная история, как какое-то свойство унаследованное из другого языка работает не про правилам CSS.

**Алексей.** При этом, если ты указываешь `currentcolor` в CSS для SVG, тоже можно делать lowercase?

**Вадим.** Скорее всего да, потому что CSS работает по собственным правилам, скорее всего это прокинется, но знаете надо пробовать. Я не думаю, что ребята стали бы рекомендовать писать строчными, поскольку, они в спецификации, обычно, пишут универсальные. Но, если вы будете в атрибутах где-нибудь указывать в SVG `currentcolor`, скорее всего придется писать CamelCase, потому что там другой контекст, не CSS.

**Алексей.** Я ещё хотел немножко вернуться к статье в блоге WebKit про цвета. Ведь я правильно понимаю, что мы до сих пор работаем в вебе в модели Web Safe цветов? Как-то так они назывались, я вот просто помню это время, когда в Photoshop, очень давно, почему-то я этим уже не занимаюсь, не знаю почему, хотя вроде цвета те же, вот в Photoshop, в колор-пикере была отдельная галочка — показать веб-совместимые цвета, и там сильно уменьшалось их количество, и нужно было выбирать среди них, иначе на разных мониторах было бы не очень прикольно, я правильно понимаю, что мы до сих пор находимся в этой модели? И вот то, что рассказали в блоге WebKit — это как раз-таки мы наконец-то сдвигаемся с этого места и идём куда-то дальше?

**Вадим.** Ну как обычно мы в вебе ограничены немножко обратной совместимостью, но по-моему это хорошо, если вы можете открыть и посмотреть самую первую страницу в интернете в вашем браузере, если вы ещё не видели, посмотрите — она забавная. Значит мы делаем, что-то правильно, если мы можем прочитать книги, которые были 200 лет назад, значит мы делаем, что-то правильно. То же самое и с цветами, если мы можем посмотреть Web Safe вещи, если мы можем смотреть на старых мониторах современные цвета, значит мы правильно думаем о совместимости. Та же самая история здесь, но в принципе это всё можно описывать по-другому, можно прогрессировать и не ограничивать себя в модели srgb цветовыми профилями, которые были, которые работают на старых устройствах. У нас тут новое поэтому да, спецификация и пост неплохо объясняют и этот новый мир более ярких цветов, не то чтобы более ярких, но более правдоподобных я бы сказал.

**Алексей.** Знаешь тут совсем в тему получается, про то, что мы сохраняем веб неизменяемым, поддерживаем его, долго несем, и про цвета очень смешно вышло. Совсем недавно Chromium внедрил к себе спецификацию цветов с четырьмя значениями. Ну вот в HEX-цветах четыре значения было, `rgba()`, мы как-то раз говорили об этом, говорили, что это в принципе никому не нужно потому что оно у нас есть и так. rgba как функция зачем нам отдельно это иметь, но тут оказалось, что после того, как они это внедрили, завели небольшое issues, которое привело к тому, что сейчас эту функцию откатывают назад, они её переводят её в статус экспериментальный просто, чтобы её убрать, скажем так, из браузера по умолчанию потому что, как оказалось эта штука сломала несколько сайтов. Интересно, что поломались не просто какие-то обычные сайты, а, например, поломалась почта Google — Gmail, то есть в принципе ребята работают в одной компании, и они немножко её сломали. Как сломали, она сломалась на Android устройствах, где у Android был свой собственный WebView, который, видимо, имел чуть больше возможностей, чем в обычном браузере. Потому что у них уже присутствовала возможность задавать цвета в HEX-значении с альфа-каналом, но они использовали не RGBA, а ARGB, то есть получается те же самые 8 знаков, но только смысл их меняется совсем. Именно поэтому всё это сломалось, именно поэтому все сразу прибежали в трекер и начали говорить — давайте это откатим назад, то есть видите, как в одной компании случайно поломали с одной стороны совместимость со старым браузерами, а с другой стороны, а почему вообще Android стал внедрять совершенно не специфичную вещь?

**Вадим.** Здесь хочется покашлять и сказать: "Веб-стандарты, давайте им следовать", как-то так. Меньше фантазии, больше публичных документов, которые можно обсудить, внедрить, и тогда уже всё будет стабильно и не будет ломаться.

**Алексей.** Ну да похоже на то. Но вообще очень забавно вышло. Из-за этого пришлось взять хорошую фичу и откатить назад.

**Вадим.** Ну мы обсуждали её раньше, мы так и не придумали почему она может стать дико хорошей, потому что считать в шестнадцатеричном исчислении сложновато. Так, что наверное `rgba()` всё-таки будет нашим основным инструментом.

**Алексей.** Ну видишь ребята, как-то в Android это используют постоянно, и им это нравится.

**Вадим.** На сколько я знаю, в софте, в софтверных языках программирования принято использовать несколько другую модель, когда вы какие-то колор-пикеры используете на десктопах, наверное замечали, что они предлагают модели не просто RGB, или HEX, а они ещё предлагают разные штуки начинающиеся со всяких юникодных последовательностей, и всяких шестнадцатеричных цветов и прочих. Так вот, видимо, для их моделей было проще использовать такие софтверные вещи, более знакомые разработчикам софта, видимо, поэтому они попали в эту ловушку.

## 25:41 Практика

## 41:47 Портфолио

## 55:50 О подкасте
